"use client";

import styles from './page.module.css';
import { useContext, useEffect } from 'react';
import { userDataContext } from '../contexts/userData';

export default function Homepage() {
  
  const { userData, setUserData } = useContext(userDataContext)

  useEffect(() => {
    async function getUserData() {
      const data = await fetch('/api/user', {
        method: "GET",
        headers: {
        "Content-Type": "application/json",
        }      
      })
      
      const json = await data.json()

      if (data.ok) {
        console.log("User Data: ", json)

        setUserData({
          username: json?.userData?.display_username,
          name: json?.userData?.display_name,
          email: json?.userData?.email,
          age: json?.userData?.age, 
          pfp: json?.userData?.profile_image,
          bio: json?.userData.profile_bio,
          privacy: json?.userData?.profile_privacy,
          gender: json?.userData?.gender,
          height: json?.userData?.height_cm,
          weight: json?.userData?.weight_lbs,
          followers: json?.userData?.followers_count,
          following: json?.userData?.following_count,
          likes: json?.userData?.likes_count,
          activity: json?.userData?.activity_level
      })
      } else {
        console.error("Error Fetching User Info: ", json)
      }
    }
    getUserData()
  }, [])

  return (
  <div className='mainWrapper'>
    <div className={styles.videoPlayerContainer}>
        <div className={styles.videoPlayer}>
          <svg className={styles.volumeButton} width="45" height="45" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_46_72)">
            <path d="M13.5143 2.91882C13.3078 2.82955 13.0815 2.79658 12.8582 2.82339C12.6349 2.85019 12.4229 2.93579 12.2435 3.07132L6.16899 7.875H1.53056C1.19357 7.875 0.870304 8.0088 0.63199 8.24712C0.393676 8.48543 0.259766 8.80869 0.259766 9.14579V16.7706C0.259766 17.1075 0.393676 17.4308 0.63199 17.6691C0.870304 17.9075 1.19357 18.0413 1.53056 18.0413H6.16899L12.1799 22.8449C12.4034 23.0244 12.6811 23.1229 12.9678 23.1245C13.1576 23.1278 13.3452 23.0841 13.5143 22.9974C13.7305 22.8945 13.9133 22.7325 14.0414 22.5302C14.1695 22.3278 14.238 22.0933 14.2386 21.8537V4.06251C14.238 3.82301 14.1695 3.58859 14.0414 3.38615C13.9133 3.18383 13.7305 3.02182 13.5143 2.91882ZM11.697 19.2104L7.40163 15.7793C7.17812 15.5999 6.90046 15.5014 6.61373 15.4998H2.80135V10.4165H6.61373C6.90046 10.4149 7.17812 10.3164 7.40163 10.137L11.697 6.7058V19.2104ZM22.7022 5.7654C22.4629 5.52612 22.1383 5.39167 21.7999 5.39167C21.4615 5.39167 21.1369 5.52612 20.8976 5.7654C20.6583 6.00469 20.5238 6.32925 20.5238 6.66765C20.5238 7.00604 20.6583 7.33071 20.8976 7.57C21.646 8.31715 22.2307 9.21172 22.6146 10.197C22.9986 11.1823 23.1735 12.2366 23.128 13.2931C23.0826 14.3497 22.8179 15.3851 22.3508 16.3339C21.8838 17.2825 21.2243 18.1237 20.4147 18.8038C20.2181 18.9719 20.0775 19.1961 20.0116 19.4463C19.9458 19.6966 19.9578 19.9608 20.0463 20.204C20.1346 20.4472 20.2952 20.6575 20.5063 20.807C20.7175 20.9565 20.9693 21.0378 21.228 21.0404C21.525 21.0411 21.8127 20.9376 22.0414 20.7481C23.1227 19.8424 24.0039 18.7216 24.6286 17.457C25.2533 16.1923 25.608 14.8114 25.6701 13.4023C25.7323 11.993 25.5004 10.5864 24.9894 9.2716C24.4787 7.95681 23.6996 6.76276 22.7022 5.7654ZM19.1057 9.36184C18.9873 9.24328 18.8467 9.14936 18.6918 9.08516C18.5369 9.02107 18.3711 8.9881 18.2035 8.9881C18.0358 8.9881 17.8701 9.02107 17.7153 9.08516C17.5603 9.14936 17.4197 9.24328 17.3012 9.36184C17.1828 9.4803 17.0887 9.62091 17.0245 9.77579C16.9605 9.93055 16.9275 10.0965 16.9275 10.2641C16.9275 10.4316 16.9605 10.5976 17.0245 10.7524C17.0887 10.9072 17.1828 11.0479 17.3012 11.1663C17.7785 11.6408 18.0482 12.2853 18.051 12.9582C18.0512 13.3285 17.9707 13.6943 17.8148 14.03C17.659 14.3659 17.4316 14.6637 17.1487 14.9024C17.02 15.0092 16.9137 15.1402 16.8357 15.288C16.7577 15.4359 16.7096 15.5977 16.6944 15.7642C16.679 15.9306 16.6966 16.0984 16.7462 16.258C16.796 16.4177 16.8765 16.566 16.9835 16.6942C17.0911 16.8221 17.2228 16.9274 17.3711 17.0042C17.5194 17.081 17.6815 17.1279 17.8478 17.142C18.0142 17.1562 18.1818 17.1374 18.341 17.0867C18.5 17.0361 18.6478 16.9545 18.7753 16.8467C19.3435 16.3703 19.8006 15.7755 20.1145 15.1038C20.4285 14.432 20.5916 13.6996 20.5926 12.9582C20.5854 11.6112 20.0517 10.3205 19.1057 9.36184Z"/>
            </g>
            <defs>
            <clipPath id="clip0_46_72">
            <rect width="25.939" height="25.939"/>
            </clipPath>
            </defs>
          </svg>
          <svg className={styles.moreButton} width="50" height="50" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
            <path d="M5.25 16.625C4.55381 16.625 3.88613 16.3484 3.39384 15.8562C2.90156 15.3639 2.625 14.6962 2.625 14C2.625 13.3038 2.90156 12.6361 3.39384 12.1438C3.88613 11.6516 4.55381 11.375 5.25 11.375C5.94619 11.375 6.61387 11.6516 7.10616 12.1438C7.59844 12.6361 7.875 13.3038 7.875 14C7.875 14.6962 7.59844 15.3639 7.10616 15.8562C6.61387 16.3484 5.94619 16.625 5.25 16.625ZM14 16.625C13.3038 16.625 12.6361 16.3484 12.1438 15.8562C11.6516 15.3639 11.375 14.6962 11.375 14C11.375 13.3038 11.6516 12.6361 12.1438 12.1438C12.6361 11.6516 13.3038 11.375 14 11.375C14.6962 11.375 15.3639 11.6516 15.8562 12.1438C16.3484 12.6361 16.625 13.3038 16.625 14C16.625 14.6962 16.3484 15.3639 15.8562 15.8562C15.3639 16.3484 14.6962 16.625 14 16.625ZM22.75 16.625C22.0538 16.625 21.3861 16.3484 20.8938 15.8562C20.4016 15.3639 20.125 14.6962 20.125 14C20.125 13.3038 20.4016 12.6361 20.8938 12.1438C21.3861 11.6516 22.0538 11.375 22.75 11.375C23.4462 11.375 24.1139 11.6516 24.6062 12.1438C25.0984 12.6361 25.375 13.3038 25.375 14C25.375 14.6962 25.0984 15.3639 24.6062 15.8562C24.1139 16.3484 23.4462 16.625 22.75 16.625Z"/>
          </svg>
        </div>
        <ul className={styles.engagementBar}>
          <li>pfp
            <div className={styles.addFollowingButton}>
              <svg width="13" height="13" viewBox="0 0 12 12" stroke='white' xmlns="http://www.w3.org/2000/svg">
                <path d="M6 1.3125V10.6875M10.6875 6H1.3125" strokeLinecap="round" strokeLinejoin="round"/>
              </svg>
            </div>
          </li>
          <li>
            <svg width="22.5" height="22.5" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 3.75C12 2.09314 10.6568 0.75 9 0.75C7.34314 0.75 6 2.09314 6 3.75C6 2.09314 4.65686 0.75 3 0.75C1.34314 0.75 0 2.09314 0 3.75C0 8.625 6 11.25 6 11.25C6 11.25 12 8.625 12 3.75Z"/>
            </svg>
          </li>
          <li>
            <svg width="22.5" height="22.5" viewBox="0 0 11 10" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 1H2C1.73478 1 1.48043 1.10536 1.29289 1.29289C1.10536 1.48043 1 1.73478 1 2V9.5L2.7335 8.2C2.9066 8.07018 3.11713 8 3.3335 8H9C9.26522 8 9.51957 7.89464 9.70711 7.70711C9.89464 7.51957 10 7.26522 10 7V2C10 1.73478 9.89464 1.48043 9.70711 1.29289C9.51957 1.10536 9.26522 1 9 1Z" strokeWidth="0.999975" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </li>
          <li>
            <svg width="22.5" height="22.513" viewBox="0 0 11 13" xmlns="http://www.w3.org/2000/svg">
              <path d="M5.10417 0.528748C3.21195 0.528748 2.037 0.696899 1.3391 0.861446C0.608393 1.03374 0.196432 1.66594 0.146662 2.33741C0.0815121 3.21634 0 4.82669 0 7.38291C0 9.41233 0.0297383 10.7434 0.0677921 11.6169C0.0924 12.1817 0.334294 12.6706 0.807068 12.8898C1.26904 13.1039 1.80221 12.9898 2.26342 12.6871L4.38404 11.2954C4.82125 11.0085 5.38708 11.0085 5.82429 11.2954L7.94491 12.6871C8.40613 12.9898 8.93929 13.1039 9.40126 12.8898C9.87405 12.6706 10.1159 12.1817 10.1406 11.6169C10.1786 10.7434 10.2083 9.41233 10.2083 7.38291C10.2083 4.82669 10.1268 3.21634 10.0617 2.33741C10.0119 1.66594 9.59995 1.03374 8.86923 0.861446C8.17133 0.696899 6.99638 0.528748 5.10417 0.528748Z"/>
            </svg>
          </li>
          <li>
            <svg width="22.5" height="22.5" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.70914 6.41862C8.40201 6.41923 8.09813 6.48159 7.81558 6.60201C7.53303 6.72243 7.27758 6.89844 7.06443 7.11957L4.54925 5.85969C4.57098 5.74174 4.58323 5.62225 4.5859 5.50234C4.58323 5.38244 4.57098 5.26295 4.54925 5.145L7.06443 3.88512C7.43451 4.26687 7.92586 4.508 8.45425 4.56716C8.98264 4.62632 9.51515 4.49983 9.9605 4.20938C10.4058 3.91893 10.7363 3.4826 10.8952 2.97521C11.054 2.46781 11.0315 1.92094 10.8313 1.42837C10.6312 0.935788 10.2659 0.528177 9.79813 0.275412C9.33036 0.0226471 8.78924 -0.0595275 8.26752 0.0429761C7.74581 0.14548 7.27599 0.426277 6.93863 0.837228C6.60127 1.24818 6.41737 1.76369 6.41845 2.29538C6.42113 2.41528 6.43338 2.53478 6.45511 2.65273L3.93993 3.91261C3.62302 3.58384 3.21508 3.35729 2.76849 3.26204C2.32189 3.16679 1.85702 3.20719 1.43355 3.37806C1.01009 3.54893 0.647351 3.84246 0.391915 4.22097C0.136479 4.59949 0 5.0457 0 5.50234C0 5.95898 0.136479 6.4052 0.391915 6.78372C0.647351 7.16223 1.01009 7.45576 1.43355 7.62663C1.85702 7.79749 2.32189 7.8379 2.76849 7.74265C3.21508 7.6474 3.62302 7.42085 3.93993 7.09208L6.45511 8.35196C6.43338 8.46991 6.42113 8.58941 6.41845 8.70931C6.41845 9.16236 6.5528 9.60525 6.80451 9.98195C7.05621 10.3587 7.41397 10.6523 7.83253 10.8256C8.2511 10.999 8.71169 11.0444 9.15604 10.956C9.60039 10.8676 10.0085 10.6494 10.3289 10.3291C10.6493 10.0087 10.8674 9.60055 10.9558 9.1562C11.0442 8.71185 10.9988 8.25127 10.8255 7.8327C10.6521 7.41413 10.3585 7.05638 9.98178 6.80467C9.60508 6.55297 9.1622 6.41862 8.70914 6.41862Z"/>
            </svg>
          </li>
        </ul>
        <div className={styles.videoNavigation}>
          <ul>
            <li className={styles.navUpArrow}>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30">
                <path d="M8 4l8 8-8 8z" />
              </svg>
            </li>
            <li className={styles.navDownArrow}>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30">
                <path d="M8 4l8 8-8 8z" />
              </svg>
            </li>
          </ul>
        </div>
    </div>
    <div>
    </div>
  </div>
  );
}
